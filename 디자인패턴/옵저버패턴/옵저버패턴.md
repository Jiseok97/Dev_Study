# ì˜µì €ë²„(Observer) íŒ¨í„´
> UML(ë„ì‹í™”)
<img width="920" alt="á„‹á…©á†¸á„Œá…¥á„‡á…¥á„‘á…¢á„á…¥á†«" src="https://user-images.githubusercontent.com/64394744/137054233-e589aabb-70b4-47f1-b025-db9583eb69d0.png">

- Subject: **êµ¬ë…ì(ConcreteObserver)** ê°€ ì´ë²¤íŠ¸ë¥¼ ë°›ì„ ì£¼ìš” ì£¼ì²´ ê°ì²´, í•´ë‹¹ Subjectì˜ íŠ¹ì • ì´ë²¤íŠ¸ ë³€ê²½ ì‹œ **êµ¬ë…í•˜ê³  ìˆëŠ” êµ¬ë…ìë“¤ì´ í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ **í•œë‹¤.
- Observer: êµ¬ë…ìë“¤ì˜ ë¶€ëª¨ê°€ ë˜ëŠ” **ì¶”ìƒ í´ë˜ìŠ¤ ê°ì²´**
- ConcreteObserver: Subjectì˜ **ì´ë²¤íŠ¸ë¥¼ ë°›ê²Œë˜ëŠ” êµ¬ë…ì ê°ì²´**
</br>

## â€£ About ì˜µì €ë²„ íŒ¨í„´ ğŸ‘¨ğŸ»â€ğŸ’»
- ê´€ì°° ì¤‘ì¸ ê°ì²´ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì—¬ëŸ¬ ë‹¤ë¥¸ ê°ì²´ì— ì•Œë¦¬ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì •ì˜í•  ìˆ˜ ìˆëŠ” ë””ìì¸ íŒ¨í„´
- ë‹¤ë¥¸ ê°ì²´ì˜ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì–´ë–¤ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì£¼ë¡œ ì‚¬ìš©í•¨
* ì£¼ë¡œ **MVCíŒ¨í„´**ì‚¬ìš©í•¨
    * ViewController â†’ **Observer(Subscriber)**
    * Model â†’ **Subject(Publisher)**
- Modelì€ View Controllerì˜ íƒ€ì…ì— ëŒ€í•´ ì•Œ í•„ìš” ì—†ì´ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì´ë¥¼ View Controllerì— ì „ë‹¬í•¨
- ì—¬ëŸ¬ ê°œì˜ View Controllerê°€ í•˜ë‚˜ì˜ Modelì˜ ë³€ê²½ì‚¬í•­ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨
</br>

## â€£ ì˜µì €ë²„ ì¥/ë‹¨ì  â­ï¸
* ì¥ì 
    * Open / Close ì›ì¹™ì„ ì§€í‚¬ ìˆ˜ ìˆìŒ
        * Subject(Publisher)ì˜ **ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ Observer(Subscriber) í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŒ** ë°˜ëŒ€ë„ ê°€ëŠ¥í•¨
    * ëŸ°íƒ€ì„ì—ì„œ ê°ì²´ê°„ ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŒ
    
* ë‹¨ì 
    * Observer(Subcriber)ì—ê²Œ ì•Œë¦¼ì´ ê°€ëŠ” **ìˆœì„œ**ëŠ” ë³´ì¥ ë˜ì§€ ì•ŠìŒ
    * Observer, Subjectì˜ ê´€ê³„ê°€ **ì˜ ì •ì˜ë˜ì§€ ì•Šìœ¼ë©´** ì›í•˜ì§€ ì•ŠëŠ” ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
</br>
    
## â€£ ì˜ˆì œ ì½”ë“œ ğŸ“–
#### Observer í”„ë¡œí† ì½œ ì •ì˜
```swift
protocol Observer {
    func update(_ notifyValue: Int)
}
```
</br>

#### ëŒ€ìƒ ê°ì²´ ìƒì„±
```swift
class Subject {
    private var observers: [Observer] = [Observer]()
    private var value: Int = Int()
    
    // ë³€ê²½ ì‹œ notify() í˜¸ì¶œ
    var number: Int {
        set {
            value = newValue
            notify()
        }
        get {
            return value
        }
    }
    
    // ì˜µì €ë²„ ë“±ë¡
    func attachObserver(_ observer: Observer) {
        observers.append(observer)
    }
    
    // ì˜µì €ë²„ ì•Œë¦¼
    func notify() {
        for observer in observers {
            observer.update(number)
        }
    }
    
}
```
* Suject í´ë˜ìŠ¤ëŠ” **Observer**ë“¤ì´ ë³´ê³  ìˆëŠ” **ëŒ€ìƒ(Observable)**
    * ì—¬ê¸° ê°’ valueê°€ ë³€ê²½ë˜ë©´ Obseverë“¤ì€ ëª¨ë‘ ì¸ì§€í•  ìˆ˜ ìˆìŒ
- **number**ê°€ ë³€ê²½ì´ ë˜ë©´ **notify()** í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.
- **update()** í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨, ì˜µì €ë²„ë“¤ì€ ê°’ì´ ë°”ë€Œì—ˆë‹¤ë¼ëŠ” **ì´ë²¤íŠ¸ë¥¼ ì–»ê²Œëœë‹¤.**
- ì´ë ‡ê²Œ ì–»ì€ ì´ë²¤íŠ¸ ì‹ í˜¸ë¥¼ **update()** í•¨ìˆ˜ëŠ” **ì‘ë‹µ ì´ë²¤íŠ¸ì— ì •í•´ë†“ì€ í–‰ë™**ì„ í•˜ê²Œ ëœë‹¤.
</br>

#### Observer ìƒì„±
```swift
class Ayos: Observer {
    func update(_ notifyValue: Int) {
        print("ì•„ìš”ì“°ê°€ number ê°’ì´ \(notifyValue) ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.")
    }
    
    private var subject: Subject = Subject()
    
    init(_ subject: Subject) {
        self.subject = subject
        self.subject.attachObserver(self)  // Observer ë“±ë¡
    }
}

class Mumu: Observer {
    func update(_ notifyValue: Int) {
    print("ë¬´ë¬´ê°€ number ê°’ì´ \(notifyValue) ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.") 
    }
    
    private var subject: Subject = Subject()
    
    init(_ subject: Subject) {
        self.subject = subject
        self.subject.attachObserver(self)  // Observer ë“±ë¡
    }
}
```
- Observerë“¤ì—ê²ŒëŠ” ìƒì„±ë  ì‹œ **ê´€ì°°í•  ëŒ€ìƒì„ ë„£ì–´ì£¼ë©´ì„œ ì´ˆê¸°í™”** í•´ì¤Œ
</br>

#### ì‹¤í–‰
```swift
func main() {
    let subject = Subject()
    let _ = Ayos(subject)
    let _ = Mumu(subject)
    
    subject.number = 2
    // ì•„ìš”ì“°ê°€ number ê°’ì´ 2 ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.
    // ë¬´ë¬´ê°€ number ê°’ì´ 2 ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.
    
    subject.number = 4
    // ì•„ìš”ì“°ê°€ number ê°’ì´ 4 ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.
    // ë¬´ë¬´ê°€ number ê°’ì´ 4 ê°’ìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤.
}
```
